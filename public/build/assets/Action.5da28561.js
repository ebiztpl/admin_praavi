import{u as k,s as h,q as S,r as l,o as p,k as L,l as m,e as d,b as r,v as B,x as c,d as A,f as i,a as g,F,z as E,I as U}from"./app.537b83f5.js";const R={class:"grid grid-cols-2 gap-6"},H={class:"col-span-2 sm:col-span-1"},w={class:"col-span-2 sm:col-span-1"},C={class:"col-span-2"},I={class:"col-span-4 sm:col-span-1"},z={key:0},G={class:"col-span-4 sm:col-span-1"},J={name:"LeaveAllocationForm"},K=Object.assign(J,{setup(O){const _=k(),s={employee:"",startDate:"",endDate:"",records:[],description:""},D="leave/allocation/",y=h({leaveTypes:[]}),n=S(D),a=h({...s}),b=h({employee:"",isLoaded:!_.params.uuid}),P=o=>{Object.assign(y,o),y.leaveTypes.forEach(t=>{s.records.push({leaveType:t,allotted:0})}),Object.assign(a,U(s))},j=o=>{var t,f;Object.assign(s,{employee:(t=o.employee)==null?void 0:t.uuid,startDate:o.startDate,endDate:o.endDate,description:o.description}),s.records.forEach(u=>{let v=o.records.find(T=>T.leaveType.uuid==u.leaveType.uuid);v!==void 0&&(u.leaveType=v.leaveType,u.allotted=v.allotted)}),Object.assign(a,U(s)),b.employee=(f=o.employee)==null?void 0:f.uuid,b.isLoaded=!0};return(o,t)=>{const f=l("BaseSelectSearch"),u=l("DatePicker"),v=l("BaseTextarea"),T=l("BaseLabel"),q=l("BaseInput"),N=l("FormAction");return p(),L(N,{"pre-requisites":!0,onSetPreRequisites:P,"init-url":D,"init-form":s,form:a,"set-form":j,redirect:"LeaveAllocation"},{default:m(()=>[d("div",R,[d("div",H,[b.isLoaded?(p(),L(f,{key:0,name:"employee",label:o.$trans("global.select",{attribute:o.$trans("employee.employee")}),modelValue:a.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>a.employee=e),error:r(n).employee,"onUpdate:error":t[1]||(t[1]=e=>r(n).employee=e),"value-prop":"uuid","init-search":b.employee,"additional-search-query":{self:0},"search-key":"name","search-action":"employee/list"},{selectedOption:m(e=>[B(c(e.value.name)+" ("+c(e.value.codeNumber)+") ",1)]),listOption:m(e=>[B(c(e.option.name)+" ("+c(e.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","error","init-search"])):A("",!0)]),d("div",w,[i(u,{start:a.startDate,"onUpdate:start":t[2]||(t[2]=e=>a.startDate=e),end:a.endDate,"onUpdate:end":t[3]||(t[3]=e=>a.endDate=e),name:"dateBetween",as:"range",label:o.$trans("general.date_between")},null,8,["start","end","label"])]),d("div",C,[i(v,{modelValue:a.description,"onUpdate:modelValue":t[4]||(t[4]=e=>a.description=e),name:"description",label:o.$trans("leave.allocation.props.description"),error:r(n).description,"onUpdate:error":t[5]||(t[5]=e=>r(n).description=e)},null,8,["modelValue","label","error"])])]),(p(!0),g(F,null,E(a.records,(e,$)=>(p(),g("div",{class:"grid grid-cols-4 gap-3 mt-4",key:e.leaveType.uuid},[d("div",I,[i(T,{class:"mt-4"},{default:m(()=>[B(c(e.leaveType.name)+" ",1),e.leaveType.alias?(p(),g("span",z,"("+c(e.leaveType.alias)+")",1)):A("",!0)]),_:2},1024)]),d("div",G,[i(q,{type:"number",name:`records.${$}.allotted`,modelValue:e.allotted,"onUpdate:modelValue":V=>e.allotted=V,placeholder:o.$trans("leave.allocation.props.allotted"),error:r(n)[`records.${$}.allotted`],"onUpdate:error":V=>r(n)[`records.${$}.allotted`]=V},null,8,["name","modelValue","onUpdate:modelValue","placeholder","error","onUpdate:error"])])]))),128))]),_:1},8,["form"])}}}),M={name:"LeaveAllocationAction"},W=Object.assign(M,{setup(O){const _=k();return(s,D)=>{const y=l("PageHeaderAction"),n=l("PageHeader"),a=l("ParentTransition");return p(),g(F,null,[i(n,{title:s.$trans(r(_).meta.trans,{attribute:s.$trans(r(_).meta.label)}),navs:[{label:s.$trans("leave.leave"),path:"Leave"},{label:s.$trans("leave.allocation.allocation"),path:"LeaveAllocationList"}]},{default:m(()=>[i(y,{name:"LeaveAllocation",title:s.$trans("leave.allocation.allocation"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),i(a,{appear:"",visibility:!0},{default:m(()=>[i(K)]),_:1})],64)}}});export{W as default};
