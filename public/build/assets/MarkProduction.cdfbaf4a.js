import{u as A,s as U,q as D,t as w,r as o,o as v,k as F,l as n,e as y,b as d,v as k,x as m,d as S,f as l,m as O,h as I,y as R,a as B,F as T,z as j}from"./app.537b83f5.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"FilterProduction",props:{initUrl:{type:String,default:""}},emits:["hide"],setup(P,{emit:_}){const V=P,$=A(),g={date:"",employee:""},r=U({...g}),i=D(V.initUrl),c=U({employee:"",isLoaded:!$.query.employee});return w(async()=>{c.employee=$.query.employee,c.isLoaded=!0}),(p,a)=>{const t=o("BaseSelectSearch"),h=o("DatePicker"),b=o("FilterForm");return v(),F(b,{"init-form":g,form:r,onHide:a[4]||(a[4]=e=>_("hide"))},{default:n(()=>[y("div",z,[y("div",G,[c.isLoaded?(v(),F(t,{key:0,name:"employee",label:p.$trans("global.select",{attribute:p.$trans("employee.employee")}),modelValue:r.employee,"onUpdate:modelValue":a[0]||(a[0]=e=>r.employee=e),"value-prop":"uuid","init-search":c.employee,"search-action":"employee/list",error:d(i).employee,"onUpdate:error":a[1]||(a[1]=e=>d(i).employee=e)},{selectedOption:n(e=>[k(m(e.value.name)+" ("+m(e.value.codeNumber)+") ",1)]),listOption:n(e=>[k(m(e.option.name)+" ("+m(e.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search","error"])):S("",!0)]),y("div",J,[l(h,{modelValue:r.date,"onUpdate:modelValue":a[2]||(a[2]=e=>r.date=e),name:"date",label:p.$trans("attendance.props.date"),"no-clear":"",error:d(i).date,"onUpdate:error":a[3]||(a[3]=e=>d(i).date=e)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}},Q={class:"divide-y divide-gray-200 dark:divide-gray-700"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={name:"AttendanceMark"},ee=Object.assign(Z,{setup(P){const _=A(),V=O(),$=I(),g={records:[]},r="attendance/",i=R(!1),c=D(r),p=U({...g}),a=async()=>{p.records=[],i.value=!0,await $.dispatch(r+"fetchProduction",{params:_.query}).then(t=>{i.value=!1,p.records=t}).catch(t=>{i.value=!1})};return w(async()=>{_.query.employee&&_.query.date&&await a()}),(t,h)=>{const b=o("BaseButton"),e=o("PageHeaderAction"),q=o("PageHeader"),C=o("ParentTransition"),L=o("BaseDataView"),N=o("BaseInput"),H=o("BaseTextarea"),E=o("FormAction"),M=o("BaseCard");return v(),B(T,null,[l(q,{title:t.$trans(d(_).meta.label),navs:[{label:t.$trans("attendance.attendance"),path:"Attendance"},{label:t.$trans("attendance.mark"),path:"AttendanceMark"}]},{default:n(()=>[l(e,null,{default:n(()=>[l(b,{design:"white",onClick:h[0]||(h[0]=s=>d(V).push({name:"AttendanceList"}))},{default:n(()=>[k(m(t.$trans("global.list",{attribute:t.$trans("attendance.attendance")})),1)]),_:1})]),_:1})]),_:1},8,["title","navs"]),l(C,{appear:"",visibility:!0},{default:n(()=>[l(K,{onAfterFilter:a,"init-url":r})]),_:1}),p.records.length?(v(),F(M,{key:0,"no-padding":"","no-content-padding":"","is-loading":i.value},{title:n(()=>[k(m(t.$trans("attendance.mark_production")),1)]),default:n(()=>[l(E,{"no-card":"","button-padding":"","keep-adding":!1,"stay-on":!0,"init-url":r,action:"markProduction","init-form":g,form:p},{default:n(()=>[y("div",Q,[(v(!0),B(T,null,j(p.records,(s,f)=>(v(),B("div",{class:"grid grid-cols-3 gap-6 px-4 py-2",key:s.attendanceType.uuid},[y("div",W,[l(L,{label:s.attendanceType.name+" ("+s.attendanceType.code+")",revert:""},{default:n(()=>[k(m(s.attendanceType.categoryDisplay)+" ("+m(s.attendanceType.unitDisplay)+") ",1)]),_:2},1032,["label"])]),y("div",X,[l(N,{type:"text",modelValue:s.value,"onUpdate:modelValue":u=>s.value=u,name:`records.${f}.value`,placeholder:t.$trans("attendance.props.value"),error:d(c)[`records.${f}.value`],"onUpdate:error":u=>d(c)[`records.${f}.value`]=u},null,8,["modelValue","onUpdate:modelValue","name","placeholder","error","onUpdate:error"])]),y("div",Y,[l(H,{rows:1,modelValue:s.remarks,"onUpdate:modelValue":u=>s.remarks=u,name:`records.${f}.remarks`,placeholder:t.$trans("attendance.props.remarks"),error:d(c)[`records.${f}.remarks`],"onUpdate:error":u=>d(c)[`records.${f}.remarks`]=u},null,8,["modelValue","onUpdate:modelValue","name","placeholder","error","onUpdate:error"])])]))),128))])]),_:1},8,["form"])]),_:1},8,["is-loading"])):S("",!0)],64)}}});export{ee as default};
