import{u as H,s as C,t as R,r,o as f,k as y,l as e,e as $,v as l,x as n,d as k,f as a,m as T,A as M,p as D,y as O,b as m,a as U,z as j,F as q}from"./app.537b83f5.js";const E={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},G={class:"col-span-3 sm:col-span-1"},J={__name:"Filter",emits:["hide"],setup(P,{emit:b}){const _=H(),v={employees:[],startDate:"",endDate:""},u=C({...v}),g=C({employees:[],isLoaded:!_.query.employees});return R(async()=>{g.employees=_.query.employees?_.query.employees.split(","):[],g.isLoaded=!0}),(c,s)=>{const h=r("BaseSelectSearch"),d=r("DatePicker"),i=r("FilterForm");return f(),y(i,{"init-form":v,form:u,multiple:["employees"],onHide:s[3]||(s[3]=o=>b("hide"))},{default:e(()=>[$("div",E,[$("div",z,[g.isLoaded?(f(),y(h,{key:0,multiple:"",name:"employees",label:c.$trans("global.select",{attribute:c.$trans("employee.employee")}),modelValue:u.employees,"onUpdate:modelValue":s[0]||(s[0]=o=>u.employees=o),"value-prop":"uuid","init-search":g.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(o=>[l(n(o.value.name)+" ("+n(o.value.codeNumber)+") ",1)]),listOption:e(o=>[l(n(o.option.name)+" ("+n(o.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):k("",!0)]),$("div",G,[a(d,{start:u.startDate,"onUpdate:start":s[1]||(s[1]=o=>u.startDate=o),end:u.endDate,"onUpdate:end":s[2]||(s[2]=o=>u.endDate=o),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},K={class:"text-success font-semibold"},Q={name:"PayrollList"},X=Object.assign(Q,{setup(P){const b=T(),_=M("emitter");let v=["filter"];D("payroll:create")&&v.unshift("create");let u=[];D("payroll:export")&&(u=["print","pdf","excel"]);const g="payroll/",c=O(!1),s=C({}),h=d=>{Object.assign(s,d)};return(d,i)=>{const o=r("PageHeaderAction"),I=r("PageHeader"),w=r("ParentTransition"),p=r("DataCell"),F=r("FloatingMenuItem"),N=r("FloatingMenu"),A=r("DataRow"),L=r("BaseButton"),S=r("DataTable"),V=r("ListItem");return f(),y(V,{"init-url":g,onSetItems:h},{header:e(()=>[a(I,{title:d.$trans("payroll.payroll")},{default:e(()=>[a(o,{url:"payrolls/",name:"Payroll",title:d.$trans("payroll.payroll"),actions:m(v),"dropdown-actions":m(u),onToggleFilter:i[0]||(i[0]=t=>c.value=!c.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title"])]),filter:e(()=>[a(w,{appear:"",visibility:c.value},{default:e(()=>[a(J,{onRefresh:i[1]||(i[1]=t=>m(_).emit("listItems")),onHide:i[2]||(i[2]=t=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(w,{appear:"",visibility:!0},{default:e(()=>[a(S,{header:s.headers,meta:s.meta,module:"payroll",onRefresh:i[4]||(i[4]=t=>m(_).emit("listItems"))},{actionButton:e(()=>[m(D)("payroll:create")?(f(),y(L,{key:0,onClick:i[3]||(i[3]=t=>m(b).push({name:"PayrollCreate"}))},{default:e(()=>[l(n(d.$trans("global.add",{attribute:d.$trans("payroll.payroll")})),1)]),_:1})):k("",!0)]),default:e(()=>[(f(!0),U(q,null,j(s.data,t=>(f(),y(A,{key:t.uuid},{default:e(()=>[a(p,{name:"codeNumber"},{default:e(()=>[l(n(t.codeNumber),1)]),_:2},1024),a(p,{name:"employee"},{default:e(()=>[l(n(t.employee.name)+" ("+n(t.employee.codeNumber)+") ",1)]),_:2},1024),a(p,{name:"designation"},{default:e(()=>[l(n(t.employee.designation),1)]),_:2},1024),a(p,{name:"branch"},{default:e(()=>[l(n(t.employee.branch),1)]),_:2},1024),a(p,{name:"startDate"},{default:e(()=>[l(n(t.startDateDisplay),1)]),_:2},1024),a(p,{name:"endDate"},{default:e(()=>[l(n(t.endDateDisplay),1)]),_:2},1024),a(p,{name:"total"},{default:e(()=>[$("span",K,n(t.totalDisplay),1)]),_:2},1024),a(p,{name:"createdAt"},{default:e(()=>[l(n(t.createdAt),1)]),_:2},1024),a(p,{name:"action"},{default:e(()=>[a(N,null,{default:e(()=>[a(F,{icon:"fas fa-arrow-circle-right",onClick:B=>m(b).push({name:"PayrollShow",params:{uuid:t.uuid}})},{default:e(()=>[l(n(d.$trans("general.show")),1)]),_:2},1032,["onClick"]),m(D)("payroll:edit")?(f(),y(F,{key:0,icon:"fas fa-edit",onClick:B=>m(b).push({name:"PayrollEdit",params:{uuid:t.uuid}})},{default:e(()=>[l(n(d.$trans("general.edit")),1)]),_:2},1032,["onClick"])):k("",!0),m(D)("payroll:delete")?(f(),y(F,{key:1,icon:"fas fa-trash",onClick:B=>m(_).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[l(n(d.$trans("general.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{X as default};
