import{u as B,q as A,s as D,r as i,o as p,k as U,l as m,e as d,b as o,v as h,x as c,d as g,f as u,a as f,F as P,z as I,n as j,I as C}from"./app.537b83f5.js";const E={class:"grid grid-cols-3 gap-6"},q={class:"col-span-3 sm:col-span-1"},R={class:"col-span-3 sm:col-span-1"},z={class:"col-span-3 sm:col-span-1"},w={key:0,class:"grid grid-cols-3 gap-3 mt-4"},G={key:0},J={class:"grid grid-cols-3 gap-3 mt-4"},K={class:"col-span-3"},M={name:"PayrollSalaryStructureForm"},Q=Object.assign(M,{setup(k){const _=B(),s={employee:"",salaryTemplate:"",effectiveDate:"",records:[],description:""},V="payroll/salaryStructure/",l=A(V),r=D({...s}),n=D({employee:"",salaryTemplate:"",isLoaded:!_.params.uuid}),H=t=>{var a,y,b,v;Object.assign(s,{employee:(a=t.employee)==null?void 0:a.uuid,salaryTemplate:(y=t.template)==null?void 0:y.uuid,effectiveDate:t.effectiveDate,records:t.records.filter(S=>S.enableUserInput),description:t.description}),Object.assign(r,C(s)),n.employee=(b=t.employee)==null?void 0:b.uuid,n.salaryTemplate=(v=t.template)==null?void 0:v.uuid,n.isLoaded=!0},F=t=>{r.records=[],t.records.forEach(a=>{a.enableUserInput&&r.records.push({uuid:a.uuid,unit:a.unit,payHead:a.payHead,amount:""})})},L=t=>{r.records=[]};return(t,a)=>{const y=i("BaseSelectSearch"),b=i("DatePicker"),v=i("BaseLabel"),S=i("BaseInput"),O=i("BaseTextarea"),N=i("FormAction");return p(),U(N,{"init-url":V,"init-form":s,form:r,"set-form":H,redirect:"PayrollSalaryStructure"},{default:m(()=>[d("div",E,[d("div",q,[n.isLoaded?(p(),U(y,{key:0,name:"employee",label:t.$trans("global.select",{attribute:t.$trans("employee.employee")}),modelValue:r.employee,"onUpdate:modelValue":a[0]||(a[0]=e=>r.employee=e),error:o(l).employee,"onUpdate:error":a[1]||(a[1]=e=>o(l).employee=e),"value-prop":"uuid","init-search":n.employee,"additional-search-query":{self:0},"search-action":"employee/list"},{selectedOption:m(e=>[h(c(e.value.name)+" ("+c(e.value.codeNumber)+") ",1)]),listOption:m(e=>[h(c(e.option.name)+" ("+c(e.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","error","init-search"])):g("",!0)]),d("div",R,[n.isLoaded?(p(),U(y,{key:0,name:"salaryTemplate",label:t.$trans("global.select",{attribute:t.$trans("payroll.salary_template.salary_template")}),modelValue:r.salaryTemplate,"onUpdate:modelValue":a[2]||(a[2]=e=>r.salaryTemplate=e),error:o(l).salaryTemplate,"onUpdate:error":a[3]||(a[3]=e=>o(l).salaryTemplate=e),"value-prop":"uuid","init-search":n.salaryTemplate,"additional-search-query":{record:1},"search-action":"payroll/salaryTemplate/list",onSelected:F,onRemoved:L},null,8,["label","modelValue","error","init-search"])):g("",!0)]),d("div",z,[u(b,{modelValue:r.effectiveDate,"onUpdate:modelValue":a[4]||(a[4]=e=>r.effectiveDate=e),name:"effectiveDate",label:t.$trans("payroll.salary_structure.props.effective_date"),"no-clear":"",error:o(l).effectiveDate,"onUpdate:error":a[5]||(a[5]=e=>o(l).effectiveDate=e)},null,8,["modelValue","label","error"])])]),r.records.length>0?(p(),f("div",w,[(p(!0),f(P,null,I(r.records,(e,T)=>(p(),f("div",{key:e.uuid,class:"col-span-3 sm:col-span-1"},[u(v,{class:j({"text-success":e.payHead.type=="earning","text-danger":e.payHead.type=="deduction"})},{default:m(()=>[h(c(e.payHead.name)+" "+c(e.payHead.code)+" ",1),e.unit?(p(),f("span",G,"("+c(e.unit.label)+")",1)):g("",!0)]),_:2},1032,["class"]),u(S,{currency:"",type:"text",modelValue:e.amount,"onUpdate:modelValue":$=>e.amount=$,name:`records.${T}.amount`,placeholder:t.$trans("payroll.salary_structure.props.amount"),error:o(l)[`records.${T}.amount`],"onUpdate:error":$=>o(l)[`records.${T}.amount`]=$},null,8,["modelValue","onUpdate:modelValue","name","placeholder","error","onUpdate:error"])]))),128))])):g("",!0),d("div",J,[d("div",K,[u(O,{modelValue:r.description,"onUpdate:modelValue":a[6]||(a[6]=e=>r.description=e),name:"description",label:t.$trans("payroll.salary_structure.props.description"),error:o(l).description,"onUpdate:error":a[7]||(a[7]=e=>o(l).description=e)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}}),W={name:"PayrollSalaryStructureAction"},Y=Object.assign(W,{setup(k){const _=B();return(s,V)=>{const l=i("PageHeaderAction"),r=i("PageHeader"),n=i("ParentTransition");return p(),f(P,null,[u(r,{title:s.$trans(o(_).meta.trans,{attribute:s.$trans(o(_).meta.label)}),navs:[{label:s.$trans("payroll.payroll"),path:"Payroll"},{label:s.$trans("payroll.salary_structure.salary_structure"),path:"PayrollSalaryStructureList"}]},{default:m(()=>[u(l,{name:"PayrollSalaryStructure",title:s.$trans("payroll.salary_structure.salary_structure"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),u(n,{appear:"",visibility:!0},{default:m(()=>[u(Q)]),_:1})],64)}}});export{Y as default};
